# 小石川創作展 物品貸出管理システム - 機能一覧

## システム概要

小石川中等教育学校の創作展における物品貸出管理システムです。管理者が物品の在庫管理・貸出・返却を行い、生徒は各アイテムの残数量をリアルタイムで確認できます。

## 主な機能

### 🔐 認証システム
- **独自認証**: SHA256 + 固定saltによるパスワードハッシュ化
- **セッション管理**: sessionStorageを使用した簡易セッション管理
- **セキュリティ**: 管理者機能へのアクセス制御

### 👥 管理者機能

#### 1. ダッシュボード
- 各機能へのナビゲーション
- 管理者名表示
- ログアウト機能

#### 2. クラス管理 (`/admin/classes`)
- クラスの追加（例：1年A組）
- クラス名の編集
- クラスの削除
- 一覧表示

#### 3. アイテム種別管理 (`/admin/items`)
- アイテム種別の追加（例：プロジェクター）
- 種別名の編集
- アイテム種別の削除
- 一覧表示

#### 4. 在庫管理 (`/admin/instances`)
- **アイテム追加**: 識別番号とアイテム種別を指定して在庫を追加
- **貸出処理**: 利用可能なアイテムをクラスに貸出
- **返却処理**: 貸出中のアイテムを返却処理
- **削除**: 不要なアイテムの削除
- **一覧表示**: 全アイテムの状態を表形式で表示
  - 識別番号
  - アイテム種別
  - 利用状態（利用可能/貸出中）
  - 借用クラス
  - 貸出日時（MM/DD HH:mm形式）

### 🎓 生徒向け機能

#### 在庫確認 (`/items`)
- **ログイン不要**: 認証なしでアクセス可能
- **リアルタイム在庫**: 各アイテムの利用可能数を表示
- **見やすい表示**: アイテム種別ごとに残数を色分け表示

## データ構造

### Firestore コレクション

#### `admins` - 管理者情報
```typescript
{
  name: string,           // 管理者名
  passwordHash: string    // SHA256(password + salt)
}
```

#### `classes` - クラス情報
```typescript
{
  name: string    // クラス名（例：1年A組）
}
```

#### `items` - アイテム種別情報
```typescript
{
  label: string   // アイテム種別名（例：プロジェクター）
}
```

#### `instances` - アイテム（個別在庫）情報
```typescript
{
  id: string,              // 識別番号（ドキュメントID）
  itemId: string,          // アイテム種別への参照
  isAvailable: boolean,    // 利用可能フラグ
  borrowedBy: string | null,   // 借用クラスへの参照
  borrowedAt: Timestamp | null // 貸出日時
}
```

## 画面フロー

### 管理者フロー
1. `/admin/login` - ログイン
2. `/admin/dashboard` - ダッシュボード
3. 各管理画面での操作
4. ログアウト

### 生徒フロー
1. `/` - ホーム画面
2. `/items` - 在庫確認（直接アクセス可能）

## UI/UX 特徴

### デザイン
- **Tailwind CSS**: モダンで統一されたデザイン
- **レスポンシブ**: モバイル・タブレット・デスクトップ対応
- **アクセシビリティ**: 色分けによる状態表示

### ユーザビリティ
- **直感的操作**: ボタンやフォームのわかりやすい配置
- **確認ダイアログ**: 削除操作時の確認
- **エラーハンドリング**: 適切なエラーメッセージ表示
- **日本語対応**: 完全日本語インターフェース

## 運用面

### セキュリティ
- パスワードハッシュ化による管理者認証
- Firestore セキュリティルールによるデータ保護
- XSS対策（React/Next.jsの標準機能）

### 拡張性
- 管理者数の追加が容易
- 新しいアイテム種別の追加が容易
- クラス数の変更に柔軟対応

### 保守性
- TypeScript による型安全性
- コンポーネント化された UI
- 明確なファイル構造

## 技術スタック詳細

### フロントエンド
- **Next.js 12**: React フレームワーク
- **React 18**: UI ライブラリ
- **TypeScript**: 型安全な開発
- **Tailwind CSS**: ユーティリティファーストCSS

### バックエンド
- **Firebase Firestore**: NoSQL データベース
- **Firebase Hosting**: 静的サイトホスティング

### 開発・デプロイ
- **Node.js**: 開発環境
- **ESLint**: コード品質管理
- **Render/Vercel**: 本番環境デプロイ
